<script>
  const form = document.getElementById("oxxoForm");
  const successMsg = document.getElementById("successMsg");

  form.addEventListener("submit", function(e) {
    e.preventDefault();

    const reingreso = document.getElementById("reingreso").value;

    const data = new FormData(form);
    const params = new URLSearchParams(data).toString();

    fetch("https://script.google.com/macros/s/AKfycby13_tnGXmWLpmv8fUXzXiYBviyM14HQMVmZ1DGj3YqnFHKDl-HiXslRYlQvDPpbz8u/exec", {
      method: "POST",
      body: params,
      headers: { "Content-Type": "application/x-www-form-urlencoded" }
    })
    .then(response => response.text())
    .then(data => {

      if (reingreso === "Sí") {
        successMsg.style.color = "red";
        successMsg.textContent =
          "Agradecemos tu interés de volver a nuestro equipo, pero de momento no se están considerando recontrataciones, pero seras de los primeros en cuanto lo hagamos.";
      } else {
        successMsg.style.color = "green";
        successMsg.textContent =
          "¡Solicitud enviada con éxito! En breve nos ponemos en contacto por Whatsapp";
      }

      form.reset();
    })
    .catch(error => {
      successMsg.style.color = "red";
      successMsg.textContent = "Error al enviar, intenta de nuevo.";
      console.error(error);
    });
  });
</script>
